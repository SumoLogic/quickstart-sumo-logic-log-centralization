---
Global:
  TemplatePath: "../second_apps.template.yaml"
  TestProjectName: SecondAppsProject
  ParallelTestsRun: 7
  GlobalParameters:
    Section1aSumoLogicDeployment: us1
    Section1bSumoLogicAccessID: '${ENTERPRISE_US1_ACCESS_ID}'
    Section1cSumoLogicAccessKey: '${ENTERPRISE_US1_ACCESS_KEY}'
    Section1dSumoLogicResourceRemoveOnDeleteStack: 'true'
    Section5aParentStackLambdaARN: 'arn:aws:lambda:ap-south-1:668508221233:function:asdasdasd-SumoLogicLambdaHelper-XF6O7N1TX2SO'
Tests:
  - TestName: installallSecondApps
    Regions:
      - ap-south-1
    Parameters:
      Values:
        Section2aInstallCloudTrailApps: 'Yes'
        Section2bCloudTrailLogsSourceCategoryName: 'Labs/AWS/CloudTrail'
        Section3aInstallSecurityHubAuditApp: 'Yes'
        Section3bSecurityHubLogsSourceCategoryName: 'Labs/AWS/SecurityHub'
        Section4aInstallS3AuditApp: 'Yes'
        Section4bS3AuditLogsSourceCategoryName: 'Labs/AWS/S3'
        Section5bAppFolderName: "Install All Second Apps"
    Skip: false
    Assertions:
      - AssertType: ResourceExistence
        Assert:
          Resources:
            - SumoCISFoundationsApp
            - SumoGISCloudTrailSecOpsApp
            - SumoSecurityHubApp
            - SumoAmazonS3AuditApp
  - TestName: installnothingSecondApps
    Regions:
      - ap-south-1
    Parameters:
      Values:
        Section2aInstallCloudTrailApps: 'No'
        Section2bCloudTrailLogsSourceCategoryName: 'Labs/AWS/CloudTrail'
        Section3aInstallSecurityHubAuditApp: 'No'
        Section3bSecurityHubLogsSourceCategoryName: 'Labs/AWS/SecurityHub'
        Section4aInstallS3AuditApp: 'No'
        Section4bS3AuditLogsSourceCategoryName: 'Labs/AWS/S3'
        #Section5bAppFolderName: "Install Nothing Second Apps"
    Skip: false
    Assertions:
      - AssertType: ResourceExistence
        Assert:
          Resources:
  - TestName: installcloudtrailSecondApps
    Regions:
      - ap-south-1
    Parameters:
      Values:
        Section2aInstallCloudTrailApps: 'Yes'
        Section2bCloudTrailLogsSourceCategoryName: 'Labs/AWS/CloudTrail'
        Section3aInstallSecurityHubAuditApp: 'No'
        Section3bSecurityHubLogsSourceCategoryName: 'Labs/AWS/SecurityHub'
        Section4aInstallS3AuditApp: 'No'
        Section4bS3AuditLogsSourceCategoryName: 'Labs/AWS/S3'
        #Section5bAppFolderName: "Install CloudTrail Second Apps"
    Skip: false
    Assertions:
      - AssertType: ResourceExistence
        Assert:
          Resources:
            - SumoCISFoundationsApp
            - SumoGISCloudTrailSecOpsApp
  - TestName: installSecurityHubSecondApps
    Regions:
      - ap-south-1
    Parameters:
      Values:
        Section2aInstallCloudTrailApps: 'No'
        Section2bCloudTrailLogsSourceCategoryName: 'Labs/AWS/CloudTrail'
        Section3aInstallSecurityHubAuditApp: 'Yes'
        Section3bSecurityHubLogsSourceCategoryName: 'Labs/AWS/SecurityHub'
        Section4aInstallS3AuditApp: 'No'
        Section4bS3AuditLogsSourceCategoryName: 'Labs/AWS/S3'
        #Section5bAppFolderName: "Install Security Hub Second Apps"
    Skip: false
    Assertions:
      - AssertType: ResourceExistence
        Assert:
          Resources:
            - SumoSecurityHubApp
  - TestName: installS3AuditSecondApps
    Regions:
      - ap-south-1
    Parameters:
      Values:
        Section2aInstallCloudTrailApps: 'No'
        Section2bCloudTrailLogsSourceCategoryName: 'Labs/AWS/CloudTrail'
        Section3aInstallSecurityHubAuditApp: 'No'
        Section3bSecurityHubLogsSourceCategoryName: 'Labs/AWS/SecurityHub'
        Section4aInstallS3AuditApp: 'Yes'
        Section4bS3AuditLogsSourceCategoryName: 'Labs/AWS/S3'
        #Section5bAppFolderName: "Install S3 Audit Second Apps"
    Skip: false
    Assertions:
      - AssertType: ResourceExistence
        Assert:
          Resources:
            - SumoAmazonS3AuditApp
  - TestName: installCloudTrailandSecurityHubSecondApps
    Regions:
      - ap-south-1
    Parameters:
      Values:
        Section2aInstallCloudTrailApps: 'Yes'
        Section2bCloudTrailLogsSourceCategoryName: 'Labs/AWS/CloudTrail'
        Section3aInstallSecurityHubAuditApp: 'Yes'
        Section3bSecurityHubLogsSourceCategoryName: 'Labs/AWS/SecurityHub'
        Section4aInstallS3AuditApp: 'No'
        Section4bS3AuditLogsSourceCategoryName: 'Labs/AWS/S3'
        Section5bAppFolderName: "Install Cloud and Security Second Apps"
    Skip: false
    Assertions:
      - AssertType: ResourceExistence
        Assert:
          Resources:
            - SumoCISFoundationsApp
            - SumoGISCloudTrailSecOpsApp
            - SumoSecurityHubApp
  - TestName: installSecurityAndS3AuditSecondApps
    Regions:
      - ap-south-1
    Parameters:
      Values:
        Section2aInstallCloudTrailApps: 'No'
        Section2bCloudTrailLogsSourceCategoryName: 'Labs/AWS/CloudTrail'
        Section3aInstallSecurityHubAuditApp: 'Yes'
        Section3bSecurityHubLogsSourceCategoryName: 'Labs/AWS/SecurityHub'
        Section4aInstallS3AuditApp: 'Yes'
        Section4bS3AuditLogsSourceCategoryName: 'Labs/AWS/S3'
        Section5bAppFolderName: "Install Security and S3 Audit Second Apps"
    Skip: false
    Assertions:
      - AssertType: ResourceExistence
        Assert:
          Resources:
            - SumoSecurityHubApp
            - SumoAmazonS3AuditApp